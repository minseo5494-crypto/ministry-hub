# WORSHEEP 서비스 인프라 현황

> 최종 업데이트: 2026-02-10

서비스 운영에 사용되는 모든 외부 서비스, 계정, 도메인 정보를 정리한 문서입니다.

---

## 1. 도메인

| 항목 | 내용 |
|------|------|
| **도메인** | worsheep.org |
| **등록 업체** | 호스팅케이알 (hosting.kr) |
| **관리 페이지** | https://www.hosting.kr |
| **DNS 관리** | 호스팅케이알 DNS 관리 |

### DNS 레코드 현황

| 타입 | 이름 | 용도 |
|------|------|------|
| A / CNAME | @ | Vercel 배포 연결 |
| TXT | resend._domainkey | Resend DKIM 인증 |
| MX | send | Resend SPF (메일 발송) |
| TXT | send | Resend SPF 인증 |
| TXT | _dmarc | DMARC 정책 |
| MX | @ | Google Workspace 메일 수신 |

---

## 2. 이메일

### Google Workspace (비즈니스 이메일)

| 항목 | 내용 |
|------|------|
| **서비스** | Google Workspace |
| **용도** | 비즈니스 이메일, 드라이브, 문서 |
| **도메인** | @worsheep.org |
| **관리 페이지** | https://admin.google.com |
| **요금제** | Business Starter |
| **월 비용** | ₩17,000~26,000 |

### Resend (트랜잭셔널 이메일)

| 항목 | 내용 |
|------|------|
| **서비스** | Resend |
| **용도** | 회원가입 인증, 비밀번호 재설정 등 시스템 이메일 발송 |
| **발신 이메일** | noreply@worsheep.org |
| **리전** | Tokyo (ap-northeast-1) |
| **관리 페이지** | https://resend.com/domains |
| **요금제** | Free |
| **연동** | Supabase Auth SMTP |

#### Supabase SMTP 설정

| 항목 | 값 |
|------|-----|
| Host | smtp.resend.com |
| Port | 465 |
| Username | resend |
| Password | Resend API Key (`re_...`) |
| Sender email | noreply@worsheep.org |

---

## 3. 호스팅 / 배포

### Vercel

| 항목 | 내용 |
|------|------|
| **용도** | Next.js 앱 배포, CDN |
| **관리 페이지** | https://vercel.com/dashboard |
| **요금제** | Hobby (무료) |
| **배포 방식** | `git push` → 자동 배포 |
| **프로덕션 URL** | https://worsheep.org |

---

## 4. 데이터베이스 / 백엔드

### Supabase

| 항목 | 내용 |
|------|------|
| **용도** | PostgreSQL DB, Auth, Storage, Realtime |
| **Project ID** | uoneiotepfmikprknxhk |
| **Project Name** | ministry-hub |
| **리전** | ap-southeast-1 (Singapore) |
| **관리 페이지** | https://supabase.com/dashboard |
| **요금제** | Pro |
| **월 비용** | ₩36,000 |

#### 주요 기능 사용 현황

| 기능 | 용도 |
|------|------|
| **Database** | 곡, 악보, 팀, 콘티 등 모든 데이터 |
| **Auth** | 이메일/Google OAuth 로그인 |
| **Storage** | 악보 PDF/이미지 파일 저장 (song-sheets 버킷) |
| **Edge Functions** | 미사용 |

---

## 5. 보안

### Cloudflare Turnstile (CAPTCHA)

| 항목 | 내용 |
|------|------|
| **용도** | 로그인/회원가입 봇 방지 |
| **Site Key** | `0x4AAAAAACMZcDVS_OETU_9t` |
| **관리 페이지** | https://dash.cloudflare.com |
| **요금제** | Free |

---

## 6. 모니터링 / 분석

### Sentry (에러 모니터링)

| 항목 | 내용 |
|------|------|
| **용도** | 프론트엔드/백엔드 에러 추적 |
| **관리 페이지** | https://sentry.io |
| **요금제** | Free |
| **환경변수** | `NEXT_PUBLIC_SENTRY_DSN`, `SENTRY_ORG`, `SENTRY_PROJECT` |

### Google Analytics 4 (웹 분석)

| 항목 | 내용 |
|------|------|
| **용도** | 사용자 행동 분석, 트래픽 추적 |
| **관리 페이지** | https://analytics.google.com |
| **요금제** | Free |
| **환경변수** | `NEXT_PUBLIC_GA_MEASUREMENT_ID` |

---

## 7. AI / API

### Anthropic API

| 항목 | 내용 |
|------|------|
| **용도** | AI 검색 기능 (곡 검색 키워드 추출) |
| **관리 페이지** | https://console.anthropic.com |
| **요금제** | 사용량 기반 |
| **월 비용** | ₩5,000~7,000 |
| **환경변수** | `ANTHROPIC_API_KEY` |

---

## 8. 개발 도구

### Claude Code Max

| 항목 | 내용 |
|------|------|
| **용도** | AI 개발 보조 |
| **요금제** | 200 플랜 |
| **월 비용** | ₩290,000 |

---

## 9. 환경변수 목록

| 변수명 | 서비스 | 필수 |
|--------|--------|------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase | O |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase | O |
| `SUPABASE_SERVICE_ROLE_KEY` | Supabase (서버 전용) | O |
| `ANTHROPIC_API_KEY` | Anthropic | X |
| `NEXT_PUBLIC_GA_MEASUREMENT_ID` | Google Analytics | X |
| `NEXT_PUBLIC_SENTRY_DSN` | Sentry | X |
| `SENTRY_ORG` | Sentry | X |
| `SENTRY_PROJECT` | Sentry | X |

> `.env.local`에 저장. 절대 Git에 커밋하지 않는다.

---

## 10. 월간 비용 요약

| 서비스 | 요금제 | 월 비용 |
|--------|--------|---------|
| Claude Code Max | 200 플랜 | ₩290,000 |
| Supabase | Pro | ₩36,000 |
| Google Workspace | Business | ₩17,000~26,000 |
| Anthropic API | 사용량 기반 | ₩5,000~7,000 |
| 도메인 (호스팅케이알) | 연 ₩12,000 | ₩1,000 |
| Vercel | Hobby | ₩0 |
| Resend | Free | ₩0 |
| Sentry | Free | ₩0 |
| Cloudflare Turnstile | Free | ₩0 |
| Google Analytics 4 | Free | ₩0 |
| **합계** | | **₩349,000~360,000** |

개발 도구(Claude Code) 제외 순수 인프라 비용: **₩59,000~70,000/월**

---

## 11. 서비스 연동 구조

```
사용자 → Vercel (worsheep.org)
           ↓
         Next.js App
           ↓
         Supabase (DB, Auth, Storage)
           ↓
         Resend (이메일 발송) ← SMTP 연동

[보안] Cloudflare Turnstile → 로그인/회원가입
[분석] Google Analytics 4 → 사용자 행동 추적
[모니터링] Sentry → 에러 추적
[AI] Anthropic API → 곡 검색
```

---

## 12. 갱신 및 만료 관리

### 수동 갱신 필요 (자동 갱신 아님)

| 서비스 | 항목 | 계약 주기 | 갱신 방법 | 비고 |
|--------|------|-----------|-----------|------|
| **호스팅케이알** | worsheep.org 도메인 | 1년 | hosting.kr에서 수동 연장 | **만료일: 2027-01-22 08:48** 만료 시 서비스 전체 접속 불가. 2026년 12월 중 갱신 권장 |

### 자동 갱신 (결제 수단 유효해야 함)

| 서비스 | 결제 주기 | 확인 사항 |
|--------|-----------|-----------|
| **Supabase Pro** | 월간 | 결제 카드 만료일 확인 |
| **Google Workspace** | 월간 | 결제 카드 만료일 확인 |
| **Claude Code Max** | 월간 | 결제 카드 만료일 확인 |
| **Anthropic API** | 사용량 기반 | 크레딧 잔액 확인 |

### 갱신 불필요 (무료 / 무기한)

| 서비스 | 사유 |
|--------|------|
| Vercel (Hobby) | 무료 플랜, 갱신 불필요 |
| Resend (Free) | 무료 플랜, 도메인 인증은 DNS 유지되면 영구 |
| Sentry (Free) | 무료 플랜 |
| Cloudflare Turnstile | 무료, Site Key 영구 |
| Google Analytics 4 | 무료 |
| SSL 인증서 | Vercel이 자동 갱신 |

### 주의사항

- **도메인 만료 시 영향**: DNS 전체 해제 → 사이트 접속 불가 + 이메일 수발신 불가 + Resend DKIM 인증 해제
- **결제 카드 만료**: 자동 갱신 서비스들의 결제 실패 시 서비스 중단 가능. 카드 갱신 시 모든 서비스의 결제 수단 업데이트 필요
- **Resend 무료 플랜 제한**: 월 3,000건, 일 100건. 사용자 증가 시 유료 전환 검토

---

*이 문서는 서비스 인프라 변경 시 반드시 업데이트합니다.*
